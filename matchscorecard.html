
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>live Match</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="LiveMatch.css" />
    <script>
        const urlParams = new URLSearchParams(window.location.search);
  
        const match_id = urlParams.get('match_id');
      </script>
  </head>
  <body>
    <!-- header -->
    <header>
        <div class="header-element">
          <nav class="navbar">
            <div class="left">
              <img src="img/final.png" alt="" class="logo" />
            </div>
            <div class="mid" style="color: #fbad18">
              <h4>Chai Sutta Betting</h4>
            </div>
            <div class="right">
              <button class="btn">Download</button>
            </div>
          </nav>
        </div>
      </header>

    <!-- header end -->

    <div class="main-section">
        <h1 class="match-title"><span id="team_a"></span> v/s <span id="team_b"></span></h1>
  
        <nav id="main-nav">
          <a class="match-info-btn btn" id="info" href="">Info</a>
          <a class="match-commentary-btn btn" id="commentry" href="">Commentary</a>
          <a class="live-match-btn btn" id="livematch" href="">Live</a>
          <a class="scorecard-btn btn" id="scorecard" href="">ScoreCard</a>
          <a class="squad-btn btn" id="squad" href="">Squads</a>
        </nav>
        <script>
          document.getElementById('info').setAttribute('href', `matchinfo.html?match_id=${match_id}`);
          document.getElementById('commentry').setAttribute('href', `matchcommentry.html?match_id=${match_id}`);
          document.getElementById('livematch').setAttribute('href', `LiveMatch.html?match_id=${match_id}`);
          document.getElementById('scorecard').setAttribute('href', `matchscorecard.html?match_id=${match_id}`);
          document.getElementById('squad').setAttribute('href', `matchplaying11.html?match_id=${match_id}`);
        </script>
  
        <div class="score">
          <div class="left">
            <div class="img">
              <img id="team_a_img"
                src=""
                alt=""
              />
            </div>
            <div class="score-left">
              <p id="team_a_short">PAK</p>
              <p id="team_a_scores">100-0</p>
              <p id="team_a_over">5.0</p>
            </div>
          </div>
          <div class="mid">
            <p class="live-status">lorem</p>
          </div>
          <div class="right">
            <div class="score-right">
              <p id="team_b_short">PAK</p>
              <p id="team_b_scores">100-0</p>
              <p id="team_b_over">20.0</p>
            </div>
            <div class="img">
              <img id="team_b_img" src=""
                alt=""
              />
            </div>
          </div>
        </div>
  
        <div class="run-rate">
          <div class="cur-rate">
            <p id="curr_rate">CRR:10</p>
          </div>
          <div class="toss" id="toss">India Win Toss</div>
          <div class="req-rate">
            <p id="runrate">RRR:</p>
          </div>
        </div>
      </div>




    <!-- Scorecard start -->

    <div class="scorecard" >
      <div class="tabs">
        <div class="tab-pane">
          <button class="btn scrored-tab-btn active" id="team_1" data-id="81">
            PAK 313 - 10 (77.1)</button
          ><button class="btn scrored-tab-btn" id="team_2" data-id="142">
            AUS 116 - 2 (47)
          </button>
        </div>
        <div class="tabs-content" id="contents">

        </div>
      </div>
    </div>
    <!-- Scorecard end -->
    <script>
        var apiKey = "bd494afa153c0ddbfb33e7ba8cf51004";
  
  
  
  
  
        var formdata = new FormData();
        formdata.append("match_id", match_id);
  
        var requestOptions = {
          method: 'POST',
          body: formdata,
          redirect: 'follow'
        };
  
        fetch(`http://apicricketchampion.in/apiv3/liveMatch/${apiKey}`, requestOptions)
          .then(response => response.text())
          .then(result => {
            var team_a = document.getElementById('team_a');
            var team_b = document.getElementById('team_b');
            var team_a_short = document.getElementById('team_a_short');
            var team_b_short = document.getElementById('team_b_short');
            
            var team_1 = document.getElementById('team_1');
            var team_2 = document.getElementById('team_2');
            var team_a_scores = document.getElementById('team_a_scores');
            var team_b_scores = document.getElementById('team_b_scores');
            var team_a_over = document.getElementById('team_a_over');
            var team_b_over = document.getElementById('team_b_over');
            var team_a_img = document.getElementById('team_a_img');
            var team_b_img = document.getElementById('team_b_img');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            var team_b = document.getElementById('team_b');
            result = JSON.parse(result);
            result = result.data;
            team_a.innerText=result.team_a;
            team_b.innerText=result.team_b;
            
            team_1.innerText=result.team_a;
            team_2.innerText=result.team_b;
            var runrate= document.getElementById('runrate');
            runrate.innerText=`RRR: ${result.runrate}`;
  
  
            var curr_rate= document.getElementById('curr_rate');
            curr_rate.innerText=`CRR: ${result.curr_rate}`;
            var toss = document.getElementById('toss');
            toss.innerText= result.toss;
            team_a_short.innerText= result.team_a_short;
            team_b_short.innerText= result.team_b_short;
            team_a_scores.innerText= result.team_a_scores;
            team_b_scores.innerText= result.team_b_scores;
            team_a_over.innerText= result.team_a_over;
            team_b_over.innerText= result.team_b_over;
            team_a_img.src = result.team_a_img;
            team_b_img.src = result.team_b_img;
            
            
          })
          .catch(error => console.log('error', error));
  
  
        var formdata = new FormData();
        formdata.append("match_id", match_id);

        var requestOptions = {
        method: 'POST',
        body: formdata,
        redirect: 'follow'
        };

        fetch(`http://apicricketchampion.in/apiv3/scorecardByMatchId/${apiKey}`, requestOptions)
        .then(response => response.text())
        .then(result => {
            result = JSON.parse(result);
            result = result.data.scorecard;

            var contents = document.getElementById('contents');
            contents.innerHTML = "";
            for(var team in result){
                contents.innerHTML +=`<div class="tab-content" id="${team}" style="">
                                        <div class="sport-team-score-details batter">
                                        <table>
                                            <thead>
                                            <tr>
                                                <th>Batter</th>
                                                <th>R</th>
                                                <th>B</th>
                                                <th>4s</th>
                                                <th>6s</th>
                                                <th>SR</th>
                                            </tr>
                                            </thead>
                                            <tbody id="battsmen_team_${team}">
                                            
                                            </tbody>
                                        </table>
                                        </div>
                                        <div class="sport-team-score-details bowler">
                                        <table>
                                            <thead>
                                            <tr>
                                                <th>Bowler</th>
                                                <th>O</th>
                                                <th>M</th>
                                                <th>R</th>
                                                <th>W</th>
                                                <th>ER</th>
                                            </tr>
                                            </thead>
                                            <tbody id="bowling_team_${team}">
                                            
                                            </tbody>
                                        </table>
                                        </div>
                                        <div class="sport-team-score-details fow">
                                        <table>
                                            <thead>
                                            <tr>
                                                <th>Fall of wickets</th>
                                                <th>Score</th>
                                                <th>Over</th>
                                            </tr>
                                            </thead>
                                            <tbody id="fallofwickets_team_${team}">
                                            
                                            </tbody>
                                        </table>
                                        </div>
                                        <div class="sport-team-score-details bowler">
                                        <table>
                                            <thead>
                                            <tr>
                                                <th>Partnership</th>
                                                <th>Run</th>
                                                <th>Ball</th>
                                            </tr>
                                            </thead>
                                            <tbody id="partnership_team_${team}">
                                            
                                            </tbody>
                                        </table>
                                        </div>
                                    </div>`;

                bat_team = document.getElementById(`battsmen_team_${team}`);
                bowl_team = document.getElementById(`bowling_team_${team}`);
                fow_team = document.getElementById(`fallofwickets_team_${team}`);
                part_team = document.getElementById(`partnership_team_${team}`);


                for(var item of result[team].batsman){
                    bat_team.innerHTML += `<tr>
                                                <td>
                                                <div class="player-name f-700">${item.name}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-r f-700">${item.run}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-b f-700">${item.ball}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-4s f-700">${item.fours}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-6s f-700">${item.sixes}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-sr f-700">${item.strike_rate}</div>
                                                </td>
                                            </tr>`;
                }

                for(var item of result[team].bolwer){
                    bowl_team.innerHTML += `<tr>
                                                <td>
                                                <div class="player-name f-700">${item.name}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-r f-700">${item.over}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-b f-700">${item.maiden}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-4s f-700">${item.run}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-6s f-700">${item.wicket}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-sr f-700">${item.economy}</div>
                                                </td>
                                            </tr>`;
                }

                for(var item of result[team].fallwicket){
                    fow_team.innerHTML += `<tr>
                                                <td>
                                                <div class="player-name f-700">${item.player}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-r f-700">${item.score} - ${item.wicket}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-b f-700">${item.over}</div>
                                                </td>
                                            </tr>`;
                }


                for(var item of result[team].partnership){
                    part_team.innerHTML += `<tr>
                                                <td>
                                                <div class="player-name f-700">
                                                    ${item.players_name}
                                                </div>
                                                </td>
                                                <td>
                                                <div class="player-score-r f-700">${item.run}</div>
                                                </td>
                                                <td>
                                                <div class="player-score-b f-700">${item.ball}</div>
                                                </td>
                                            </tr>`;
                }


         


            }


        })
        .catch(error => console.log('error', error));
      </script>

    
  </body>
</html>