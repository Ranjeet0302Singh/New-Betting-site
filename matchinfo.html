<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>live Match</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="LiveMatch.css" />
    <script>
      const urlParams = new URLSearchParams(window.location.search);

      const match_id = urlParams.get("match_id");
    </script>
  </head>
  <body>
    <!-- header -->
    <header>
        <div class="header-element">
          <nav class="navbar">
            <div class="left">
              <img src="img/final.png" alt="" class="logo" />
            </div>
            <div class="mid" style="color: #fbad18">
              <h4>Chai Sutta Betting</h4>
            </div>
            <div class="right">
              <button class="btn">Download</button>
            </div>
          </nav>
        </div>
      </header>

    <div class="main-section">
      <h1 class="match-title">
        <span id="team_a"></span> v/s <span id="team_b"></span>
      </h1>

      <nav id="main-nav">
        <a class="match-info-btn btn" id="info" href="">Info</a>
        <a class="match-commentary-btn btn" id="commentry" href=""
          >Commentary</a
        >
        <a class="live-match-btn btn" id="livematch" href="">Live</a>
        <a class="scorecard-btn btn" id="scorecard" href="">ScoreCard</a>
        <a class="squad-btn btn" id="squad" href="">Squads</a>
      </nav>
      <script>
        document
          .getElementById("info")
          .setAttribute("href", `matchinfo.html?match_id=${match_id}`);
        document
          .getElementById("commentry")
          .setAttribute("href", `matchcommentry.html?match_id=${match_id}`);
        document
          .getElementById("livematch")
          .setAttribute("href", `LiveMatch.html?match_id=${match_id}`);
        document
          .getElementById("scorecard")
          .setAttribute("href", `matchscorecard.html?match_id=${match_id}`);
        document
          .getElementById("squad")
          .setAttribute("href", `matchplaying11.html?match_id=${match_id}`);
      </script>

      <div class="score">
        <div class="left">
          <div class="img">
            <img id="team_a_img" src="" alt="" />
          </div>
          <div class="score-left">
            <p id="team_a_short">PAK</p>
            <p id="team_a_scores">100-0</p>
            <p id="team_a_over">5.0</p>
          </div>
        </div>
        <div class="mid">
          <p class="live-status">lorem</p>
        </div>
        <div class="right">
          <div class="score-right">
            <p id="team_b_short">PAK</p>
            <p id="team_b_scores">100-0</p>
            <p id="team_b_over">20.0</p>
          </div>
          <div class="img">
            <img id="team_b_img" src="" alt="" />
          </div>
        </div>
      </div>

      <div class="run-rate">
        <div class="cur-rate">
          <p id="curr_rate">CRR:10</p>
        </div>
        <div class="toss" id="toss">India Win Toss</div>
        <div class="req-rate">
          <p id="runrate">RRR:</p>
        </div>
      </div>
    </div>
    <!-- Match Info Start -->
    <div class="match-info" id="match_info"></div>
    <!-- Match Info End -->
    <script>
      var apiKey = "bd494afa153c0ddbfb33e7ba8cf51004";

      var formdata = new FormData();
      formdata.append("match_id", match_id);

      var requestOptions = {
        method: "POST",
        body: formdata,
        redirect: "follow",
      };

      fetch(
        `http://apicricketchampion.in/apiv3/liveMatch/${apiKey}`,
        requestOptions
      )
        .then((response) => response.text())
        .then((result) => {
          var team_a = document.getElementById("team_a");
          var team_b = document.getElementById("team_b");
          var team_a_short = document.getElementById("team_a_short");
          var team_b_short = document.getElementById("team_b_short");
          var team_a_scores = document.getElementById("team_a_scores");
          var team_b_scores = document.getElementById("team_b_scores");
          var team_a_over = document.getElementById("team_a_over");
          var team_b_over = document.getElementById("team_b_over");
          var team_a_img = document.getElementById("team_a_img");
          var team_b_img = document.getElementById("team_b_img");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          var team_b = document.getElementById("team_b");
          result = JSON.parse(result);
          result = result.data;
          team_a.innerText = result.team_a;
          team_b.innerText = result.team_b;
          var runrate = document.getElementById("runrate");
          runrate.innerText = `RRR: ${result.runrate}`;

          var curr_rate = document.getElementById("curr_rate");
          curr_rate.innerText = `CRR: ${result.curr_rate}`;
          var toss = document.getElementById("toss");
          toss.innerText = result.toss;
          team_a_short.innerText = result.team_a_short;
          team_b_short.innerText = result.team_b_short;
          team_a_scores.innerText = result.team_a_scores;
          team_b_scores.innerText = result.team_b_scores;
          team_a_over.innerText = result.team_a_over;
          team_b_over.innerText = result.team_b_over;
          team_a_img.src = result.team_a_img;
          team_b_img.src = result.team_b_img;
        })
        .catch((error) => console.log("error", error));

      var formdata = new FormData();
      formdata.append("match_id", match_id);

      var requestOptions = {
        method: "POST",
        body: formdata,
        redirect: "follow",
      };

      fetch(
        `http://apicricketchampion.in/apiv3/matchInfo/${apiKey}`,
        requestOptions
      )
        .then((response) => response.text())
        .then((result) => {
          console.log(result);
          var match_info = document.getElementById("match_info");
          result = JSON.parse(result);
          result = result.data;
          match_info.innerHTML = `
            <div class="sport-match-name cricket-info-details">
                <p class="matchs">${result.matchs}</p>
                <p class="matchvsmatch"><strong>${result.team_a_short} vs ${result.team_b_short}</strong></p>
            </div>
            <div class="sport-match-name">
                <p class="matchTime">
                <i class="fa-regular fa-calendar-days"></i>${result.match_time} on ${result.match_date} 
                </p>
            </div>
            <div class="sport-match-name">
                <p>
                <i class="fa-solid fa-map-marker"></i>
                <strong>${result.venue}</strong>
                </p>
            </div>

            <div class="sport-match-name">
                <h4>TOSS</h4>
                <p>${result.toss}</p>
            </div>

            <div class="sport-match-name">
                <h4>UMPIRE</h4>
                <p>${result.umpire}</p>
            </div>

            <div class="sport-match-name">
                <h4>3RD UMPIRE</h4>
                <p>${result.third_umpire}</p>
            </div>
            <div class="sport-match-name">
                <h4>Referee</h4>
                <p>${result.referee}</p>
            </div>

            <div class="match-weather sport-match-name">
                <h4>Weather Report (Sydney)</h4>
                <div class="weather-report">
                <span
                    ><img
                    src="${result.venue_weather.weather_icon}"
                    />${result.venue_weather.temp_c}â„ƒ</span
                >
                <span>${result.venue_weather.weather}</span>
                </div>
                <div class="weather-report">
                <span>Wind Speed</span>
                <span>${result.venue_weather.wind_mph} m/h</span>
                </div>
                <div class="weather-report">
                <span>Humidity</span>
                <span>${result.venue_weather.humidity} %</span>
                </div>
                <div class="weather-report">
                <span>Rain Chance</span>
                <span>${result.venue_weather.cloud} %</span>
                </div>
            </div> `;
        })
        .catch((error) => console.log("error", error));
    </script>
  </body>
</html>
